# üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### ‚úÖ –°—Épabase –≥–æ—Ç–æ–≤:
- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ https://supabase.com
- [ ] –ü–æ–ª—É—á–µ–Ω—ã Project URL –∏ API Key
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env.local` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Node.js —Å https://nodejs.org

### ‚úÖ Bitrix24 –≥–æ—Ç–æ–≤:
- [ ] –°–æ–∑–¥–∞–Ω –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ –≤ Bitrix24
- [ ] –í–µ–±—Ö—É–∫ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞: `crm`, `task`, `user`  
- [ ] URL –≤–µ–±—Ö—É–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω

## üß™ –ü–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
cd /Users/mas/let-s-build-it

# –ï—Å–ª–∏ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
./test-supabase.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
npm install
npm run dev
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12) ‚Üí Console
3. –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ Supabase:
   - ‚úÖ `Supabase client initialized` 
   - ‚ùå `Supabase connection error` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á–∏

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Bitrix24
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ **Bitrix24 ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏**
2. –í—Å—Ç–∞–≤—å—Ç–µ URL –≤–µ–±—Ö—É–∫–∞
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

### –®–∞–≥ 4: –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å–¥–µ–ª–æ–∫
1. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–¥–µ–ª–∫–∏"**
2. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é –±—Ä–∞—É–∑–µ—Ä–∞:
   ```
   üìä –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ—Ä–æ–Ω–∫–∞ –ü–†–û–î–ê–ñ–ò...
   üìã –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–¥–µ–ª–æ–∫: 1,234
   üíæ –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ –≤ Supabase...
   ‚úÖ –°–Ω–∏–º–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: snapshot_xyz
   ```

### –®–∞–≥ 5: –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á  
1. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–¥–∞—á–∏"**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:
   ```
   üìã –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∑–∞–¥–∞—á: 567
   üíæ –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ –∑–∞–¥–∞—á...
   ‚úÖ –°–Ω–∏–º–æ–∫ –∑–∞–¥–∞—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω
   ```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Supabase
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Supabase
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ **Table Editor ‚Üí data_snapshots**
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. –ü–æ–ª—è `deals_data` –∏ `tasks_data` –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å JSON

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Supabase connection error"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env.local`:
   ```bash
   cat .env.local
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤ Supabase ‚Üí Settings ‚Üí API
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `Ctrl+C` –∏ `npm run dev`

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid API key" 
**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **anon public key**, –ù–ï service role key
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –∫–ª—é—á–µ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
3. –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `eyJ`

### –ü—Ä–æ–±–ª–µ–º–∞: "Table 'data_snapshots' doesn't exist"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase ‚Üí SQL Editor
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é:
```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ supabase/migrations/20250122_create_snapshots_table.sql
CREATE TABLE IF NOT EXISTS data_snapshots (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    week_start DATE NOT NULL,
    week_end DATE NOT NULL,
    deals_count INTEGER DEFAULT 0,
    tasks_count INTEGER DEFAULT 0,
    deals_data JSONB DEFAULT '[]'::jsonb,
    tasks_data JSONB DEFAULT '[]'::jsonb,
    metadata JSONB DEFAULT '{}'::jsonb
);
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Bitrix24 connection error"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤–µ–±—Ö—É–∫–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `/`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–µ–±—Ö—É–∫ –∞–∫—Ç–∏–≤–µ–Ω –≤ Bitrix24
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –≤–µ–±—Ö—É–∫–∞: `crm`, `task`, `user`

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–¥–µ–ª–æ–∫:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ > 0
- –°–Ω–∏–º–æ–∫ —Å–æ–∑–¥–∞–Ω –≤ Supabase  
- –í —Ç–∞–±–ª–∏—Ü–µ –ø–æ—è–≤–∏–ª–∞—Å—å –∑–∞–ø–∏—Å—å —Å —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ–π
- –ü–æ–ª–µ `deals_data` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ JSON –æ–±—ä–µ–∫—Ç–æ–≤

### –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á ‚â• 0 (–º–æ–∂–µ—Ç –±—ã—Ç—å 0)
- –°–Ω–∏–º–æ–∫ –∑–∞–¥–∞—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- –ü–æ–ª–µ `tasks_data` –æ–±–Ω–æ–≤–ª–µ–Ω–æ

### –î–∞—à–±–æ—Ä–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ CSV/PDF

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ "–±–æ–µ–≤–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏"

‚úÖ **–ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –µ—Å–ª–∏:**
- Supabase —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- Bitrix24 –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
- –°–Ω–∏–º–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ
- UI –æ—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ (< 3 —Å–µ–∫ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É)
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Lovable –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ Supabase
3. **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** –û–±—É—á–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ Supabase
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∫–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ  
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!** üéâ